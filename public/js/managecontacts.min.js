function refreshContacts() {
    $.post(SERVER_ABSOLUTE_PATH + "/contacts/getContacts", function(a) {
        var b = JSON.parse(a);
        $("#tableBody").empty(), $("#mobileTable").empty(), $.each(b, function(a, b) {
            $("#tableBody").append("<tr><td>" + b.ContactName + "</td><td>" + b.ContactMail + "</td><td>" + b.ContactTel + "</td><td><ul class='button-group radius text-center'><li><a id='" + b.ContactId + "' name='btEdit' href='#' class='small button'><i class='fa fa-pencil fa-lg'></i></a></li><li><a id='" + b.ContactId + "' name='btDelete' href='#' class='small button'><i class='fa fa-trash-o fa-lg'></i></a></li></ul></td></tr>"), $("#mobileTable").append("<li><ul class='vcard show-for-small-only'><li class='fn'>" + b.ContactName + "</li><li class='Mail'>" + b.ContactMail + "</li><li>" + b.ContactTel + "</li><li><ul class='button-group radius'><li><a id='" + b.ContactId + "' name='btEdit' href='#' class='small button'><i class='fa fa-pencil fa-lg'></i></a></li><li><a id='" + b.ContactId + "' name='btDelete' href='#' class='small button'><i class='fa fa-trash-o fa-lg'></i></a></li></ul></li></ul></li>")
        })
    })
}
$.getScript("config.min.js"), $(document).foundation(), $(document).foundation("abide", "events"), $(document).on("opened", "#addContact", function() {
    $("#txtName").focus()
}), $(document).on("opened", "#editContact", function() {
    $("#txtEditName:visible").focus(), $("#txtEditName").select()
}), $("#searchInput").on("keyup", function() {
    var a = $(this).val();
    "" != a ? ($("#mobileTable li").show(), $("#mobileTable li:not(:contains('" + a + "'))").hide(), $("#tableBody tr").show(), $("#tableBody tr:not(:contains('" + a + "'))").hide()) : ($("#mobileTable li").show(), $("#tableBody tr").show())
}), $("#frmAddContact").on("valid", function() {
    $.post(SERVER_ABSOLUTE_PATH + "/contacts/addContact", {
        name: $("#txtName").val(),
        mail: $("#txtMail").val(),
        phone: $("#txtPhone").val()
    }, function() {
        refreshContacts(), $("#txtName").val(""), $("#txtMail").val(""), $("#txtPhone").val(""), $("#addContact").foundation("reveal", "close")
    })
}), $("#btnAddContact").click(function() {
    $("#addContact").foundation("reveal", "open")
}), $("#tableBody, #mobileTable").on("click", "a[name='btDelete']", function() {
    var a = $(this).attr("id");
    $.post(SERVER_ABSOLUTE_PATH + "/contacts/deleteContact", {
        contactId: a
    }, function() {
        refreshContacts()
    })
}), $("#tableBody, #mobileTable").on("click", "a[name='btEdit']", function() {
    var a = $(this).attr("id");
    $.post(SERVER_ABSOLUTE_PATH + "/contacts/getContact", {
        contactId: a
    }, function(b) {
        var c = JSON.parse(b);
        $("#txtEditName").val(c.ContactName), $("#txtEditMail").val(c.ContactMail), $("#txtEditPhone").val(c.ContactTel), $("#contactId").val(a)
    }), $("#editContact").foundation("reveal", "open")
}), $("#frmEditContact").on("valid", function() {
    $.post(SERVER_ABSOLUTE_PATH + "/contacts/updateContact", {
        contactId: $("#contactId").val(),
        name: $("#txtEditName").val(),
        mail: $("#txtEditMail").val(),
        phone: $("#txtEditPhone").val()
    }, function() {
        refreshContacts(), $("#editContact").foundation("reveal", "close")
    })
});